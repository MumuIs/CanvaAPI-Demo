<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Canva Connect ç”µå•† Demo - åŒäº‹å¿«é€Ÿå¯åŠ¨ï¼ˆmacOSï¼‰</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet" />
    <style>
      :root {
        --primary: #00B79B;
        --text: #1f2937; /* gray-800 */
        --muted: #6b7280; /* gray-500 */
        --border: #e5e7eb; /* gray-200 */
      }
      * { box-sizing: border-box; }
      html, body { margin: 0; padding: 0; font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; color: var(--text); }
      .page { max-width: 900px; margin: 32px auto; padding: 32px; border: 1px solid var(--border); border-radius: 12px; }
      h1 { font-size: 22px; margin: 0 0 16px; }
      h2 { font-size: 18px; margin: 24px 0 8px; }
      p { margin: 8px 0; line-height: 1.6; }
      code, .code { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; background: #f8fafc; padding: 2px 6px; border-radius: 6px; border: 1px solid var(--border); }
      .block { background: #f8fafc; border: 1px solid var(--border); border-radius: 10px; padding: 12px 14px; }
      .steps { display: grid; gap: 12px; }
      .step { border: 1px solid var(--border); border-radius: 12px; padding: 14px; }
      .title { display: flex; align-items: center; gap: 8px; font-weight: 700; }
      .badge { color: #fff; background: var(--primary); padding: 2px 8px; border-radius: 999px; font-size: 12px; font-weight: 700; letter-spacing: .3px; }
      .muted { color: var(--muted); }
      .cols { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
      .small { font-size: 12px; }
      @media print {
        .page { border: none; padding: 0; margin: 0; }
        a { color: inherit; text-decoration: none; }
      }
    </style>
  </head>
  <body>
    <main class="page">
      <div class="title" style="justify-content: space-between;">
        <div class="title">
          <span style="display:inline-block;width:10px;height:10px;border-radius:50%;background:var(--primary);"></span>
          <h1 style="margin:0;">Canva Connect ç”µå•† Demo - åŒäº‹å¿«é€Ÿå¯åŠ¨ï¼ˆmacOSï¼‰</h1>
        </div>
        <span class="badge">1 é¡µæŒ‡å—</span>
      </div>

      <p class="muted">æœ¬é¡µå¯ç›´æ¥â€œæ–‡ä»¶ â†’ æ‰“å° â†’ å­˜å‚¨ä¸º PDFâ€å¯¼å‡ºä¸º PDF åˆ†äº«ã€‚</p>

      <h2>ä¸€ã€å®‰è£…å¿…å¤‡è½¯ä»¶ï¼ˆä¸€æ¬¡å³å¯ï¼‰</h2>
      <div class="steps">
        <div class="step">
          <div class="title">1) å®‰è£… Git</div>
          <p>åœ¨"ç»ˆç«¯ Terminal"æ‰§è¡Œï¼š</p>
          <div class="block"><code>xcode-select --install</code></div>
        </div>
        <div class="step">
          <div class="title">2) å®‰è£… Node.js 20ï¼ˆå¿…é¡»ï¼‰</div>
          <p class="muted small"><strong>é‡è¦ï¼š</strong>è¯·ä½¿ç”¨ Node 20.xï¼ŒNode 22 å­˜åœ¨å…¼å®¹æ€§é—®é¢˜ã€‚</p>
          <p>å¦‚ä½¿ç”¨ Homebrewï¼š</p>
          <div class="block"><code>brew install node@20</code></div>
          <p class="small muted">è‹¥åœ¨ macOS 15 ä¸Šé‡åˆ° Homebrew ä¸æ”¯æŒçš„æç¤ºï¼Œè¯·æ”¹ç”¨ä»¥ä¸‹ä»»ä¸€å¤‡ç”¨æ–¹æ¡ˆï¼š</p>
          <div class="cols small">
            <div>
              <p><strong>A) ä½¿ç”¨ nvm å®‰è£…ï¼ˆæ¨èï¼‰</strong></p>
              <div class="block"><pre style="margin:0;white-space:pre-wrap;"># å®‰è£… nvm
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.7/install.sh | bash

# é‡æ–°æ‰“å¼€ç»ˆç«¯æˆ–æ‰§è¡Œï¼š
export NVM_DIR="$HOME/.nvm"
[ -s "$NVM_DIR/nvm.sh" ] && . "$NVM_DIR/nvm.sh"

# å®‰è£…å¹¶ä½¿ç”¨ Node 20
nvm install 20
nvm use 20
node -v
npm -v</pre></div>
            </div>
            <div>
              <p><strong>B) å®˜æ–¹å®‰è£…åŒ…</strong></p>
              <p>è®¿é—® <span class="code">https://nodejs.org/</span> ä¸‹è½½ macOS 20.x LTS å®‰è£…åŒ…ï¼ˆApple Silicon/Intel å¯¹åº”æ¶æ„ï¼‰ã€‚å®‰è£…å®Œæˆååœ¨ç»ˆç«¯æ‰§è¡Œ <span class="code">node -v</span> ä¸ <span class="code">npm -v</span> ç¡®è®¤ã€‚</p>
            </div>
          </div>
        </div>
      </div>

      <h2>äºŒã€è·å–ä»£ç å¹¶ä¸€é”®å¯åŠ¨</h2>
      <div class="steps">
        <div class="step">
          <div class="title">3A) å…¬æœ‰ä»“åº“ Â· HTTPS å¿«é€Ÿå…‹éš†ï¼ˆæ— éœ€ GitHub è´¦å·ï¼‰</div>
          <div class="block"><code>git clone https://github.com/MumuIs/CanvaAPI-Demo.git<br/>cd CanvaAPI-Demo</code></div>
          <p class="muted small">å¦‚å‡ºç°æµè§ˆå™¨ç™»å½•/credential å¼‚å¸¸ï¼Œè§ä¸‹æ–¹â€œHTTPS å‡­æ®ä¿®å¤â€ã€‚</p>
        </div>
        <div class="step">
          <div class="title">3B) æ¨èï¼šé…ç½® SSH å¹¶å…‹éš†ï¼ˆé•¿æœŸæ›´çœå¿ƒï¼‰</div>
          <p>ä»…éœ€ä¸€æ¬¡é…ç½® SSHï¼Œåç»­æ— éœ€åå¤ç™»å½•ã€‚</p>
          <div class="block small"><pre style="margin:0;white-space:pre-wrap;"># ç”Ÿæˆ SSH å¯†é’¥ï¼ˆå·²å­˜åœ¨å¯è·³è¿‡ï¼‰
ssh-keygen -t ed25519 -C "ä½ çš„é‚®ç®±"
eval "$(ssh-agent -s)"
ssh-add --apple-use-keychain ~/.ssh/id_ed25519
pbcopy < ~/.ssh/id_ed25519.pub   # ç²˜è´´åˆ° GitHub > Settings > SSH and GPG keys

# æµ‹è¯•è¿æ¥ï¼ˆçœ‹åˆ°æˆåŠŸæç¤ºå³å¯ï¼‰
ssh -T git@github.com

# å…‹éš†é¡¹ç›®
git clone git@github.com:MumuIs/CanvaAPI-Demo.git
cd CanvaAPI-Demo</pre></div>
          <p class="muted small">å…¬æœ‰ä»“åº“å¯ç›´æ¥ç”¨ HTTPSï¼›å›¢é˜Ÿé•¿æœŸåä½œå»ºè®®æ”¹ç”¨ SSHã€‚</p>
        </div>
        <div class="step">
          <div class="title">HTTPS å‡­æ®ä¿®å¤ï¼ˆå‡ºç°æµè§ˆå™¨ç™»å½•æˆ– credential é”™è¯¯æ—¶ï¼‰</div>
          <p class="muted small">å¦‚æœå‡ºç° <span class="code">git: 'credential-' ä¸æ˜¯ä¸€ä¸ª git å‘½ä»¤</span>ã€æˆ–åå¤è¦æ±‚æµè§ˆå™¨ç™»å½•ï¼Œå¯å…ˆä¿®æ­£å‡­æ®åŠ©æ‰‹ï¼š</p>
          <div class="block small"><pre style="margin:0;white-space:pre-wrap;">git config --global --get-all credential.helper
git config --global --unset-all credential.helper
git config --global credential.helper osxkeychain

git clone https://github.com/MumuIs/CanvaAPI-Demo.git
cd CanvaAPI-Demo</pre></div>
        </div>
        <div class="step">
          <div class="title">4) èµ‹äºˆè„šæœ¬æƒé™ & ä¸€é”®å¯åŠ¨</div>
          <div class="block"><code>chmod +x ./bootstrap.sh<br/>./bootstrap.sh</code></div>
          <p class="muted small">é¦–æ¬¡è‹¥æœªæ£€æµ‹åˆ° <span class="code">.env</span>ï¼Œè„šæœ¬ä¼šè‡ªåŠ¨ç”Ÿæˆæ¨¡æ¿å¹¶é€€å‡ºï¼Œè¯·å…ˆå¡«å†™åå†æ¬¡è¿è¡Œè„šæœ¬ã€‚</p>
        </div>
      </div>

      <h2>ä¸‰ã€å¡«å†™ .envï¼ˆä»…é¦–æ¬¡ï¼‰</h2>
      <div class="step">
        <p><strong style="color:#d32f2f;">âš ï¸ é‡è¦ï¼š.env æ–‡ä»¶ä½ç½®å¿…é¡»æ­£ç¡®</strong></p>
        <p>æ­£ç¡®è·¯å¾„ï¼š<span class="code" style="background-color:#fff3cd;padding:2px 6px;font-weight:600;">CanvaAPI-Demo/canva-connect-api-starter-kit/.env</span></p>
        <p class="muted small">æ³¨æ„ï¼š<strong>ä¸æ˜¯</strong> <span class="code" style="text-decoration:line-through;">demos/ecommerce_shop/.env</span>ï¼ˆæ­¤æ–‡ä»¶ä¸ä¼šè¢«è¯»å–ï¼‰</p>
        
        <div class="cols">
          <div>
            <p>æ‰“å¼€æ–¹å¼ Aï¼ˆVS Codeï¼Œæ¨èï¼‰ï¼š</p>
            <div class="block"><code>cd ~/CanvaAPI-Demo<br/>open -a "Visual Studio Code" canva-connect-api-starter-kit/.env</code></div>
          </div>
          <div>
            <p>æ‰“å¼€æ–¹å¼ Bï¼ˆæ–‡æœ¬ç¼–è¾‘ï¼‰ï¼š</p>
            <div class="block"><code>cd ~/CanvaAPI-Demo<br/>open -e canva-connect-api-starter-kit/.env</code></div>
          </div>
        </div>
        <p class="muted small">ğŸ’¡ å°æŠ€å·§ï¼šå¦‚æœä¸ç¡®å®šæ‰“å¼€çš„æ˜¯å¦ä¸ºæ­£ç¡®æ–‡ä»¶ï¼Œå¯ä»¥å…ˆæ‰§è¡Œ <span class="code">cd ~/CanvaAPI-Demo</span> ç¡®ä¿åœ¨é¡¹ç›®æ ¹ç›®å½•ã€‚</p>
      </div>
        <p>æŠŠä¸‹åˆ—å†…å®¹ç²˜è´´åˆ° .envï¼ˆæ›¿æ¢ä¸ºè´Ÿè´£äººæä¾›çš„çœŸå®å€¼ï¼›å˜é‡åéœ€ä¸æºç æ ¡éªŒä¸€è‡´ï¼Œåˆè®¡ 8 é¡¹ï¼‰ï¼š</p>
        <div class="block small"><pre style="margin:0;white-space:pre-wrap;">BACKEND_PORT=3001
BACKEND_URL=http://127.0.0.1:3001
FRONTEND_URL=http://127.0.0.1:3000
BASE_CANVA_CONNECT_API_URL=https://api.canva.cn/rest
BASE_CANVA_CONNECT_AUTH_URL=https://www.canva.cn/api

CANVA_CLIENT_ID=ç²˜è´´å®Œæ•´çš„ClientId
CANVA_CLIENT_SECRET=ç²˜è´´å®Œæ•´çš„ClientSecret

DATABASE_ENCRYPTION_KEY=dev-encryption-key-32-chars-12345678</pre></div>
        <p class="muted small">å¤‡æ³¨ï¼š
          <br/>1) <span class="code">BASE_CANVA_CONNECT_API_URL</span> ä¸éœ€è¦å¸¦ <span class="code">/v1</span>ï¼ˆä»£ç ä¼šè‡ªåŠ¨æ·»åŠ ï¼‰ï¼›<span class="code">BASE_CANVA_CONNECT_AUTH_URL</span> å¿…é¡»å¸¦ <span class="code">/api</span>ï¼ˆéä¸­å›½åŒºç”¨ canva.comï¼‰
          <br/>2) é¦–æ¬¡è¿è¡Œ <span class="code">./bootstrap.sh</span> è‹¥æœªæ£€æµ‹åˆ° <span class="code">.env</span>ï¼Œå°†è‡ªåŠ¨ç”Ÿæˆæœ€å°æ¨¡æ¿å¹¶é€€å‡ºï¼Œè¯·å…ˆå¡«å†™å†é‡æ–°è¿è¡Œè„šæœ¬ã€‚
          <br/>3) è´Ÿè´£äººéœ€åœ¨ Canva åº”ç”¨åå°é…ç½®å›è°ƒ <span class="code">http://127.0.0.1:3001/oauth/redirect</span>ã€‚
        </p>
      </div>

      <h2>å››ã€.env é…ç½®éªŒè¯ï¼ˆé¦–æ¬¡å¿…åšï¼‰</h2>
      <div class="steps">
        <div class="step">
          <div class="title">éªŒè¯ .env æ–‡ä»¶æ˜¯å¦è¢«æ­£ç¡®è¯»å–</div>
          <p>åœ¨å¯åŠ¨å‰ï¼Œå»ºè®®å…ˆéªŒè¯ç¯å¢ƒå˜é‡é…ç½®æ˜¯å¦æ­£ç¡®ï¼š</p>
          <div class="block small"><pre style="margin:0;white-space:pre-wrap;"># 1. ç¡®è®¤ .env æ–‡ä»¶ä½ç½®ï¼ˆåº”åªæœ‰ä¸€ä¸ªï¼‰
cd ~/CanvaAPI-Demo
/usr/bin/find canva-connect-api-starter-kit -maxdepth 2 -name ".env*" -print

# 2. æ£€æŸ¥ CLIENT_ID å’Œ SECRET é•¿åº¦ä¸å‰ç¼€ï¼ˆä¸æ˜¾ç¤ºå®Œæ•´å€¼ï¼‰
node -e "require('./canva-connect-api-starter-kit/node_modules/dotenv').config({path:'canva-connect-api-starter-kit/.env'});const r=v=>({len:(v||'').length,head:(v||'').slice(0,8)});console.log({ID:r(process.env.CANVA_CLIENT_ID),SECRET:r(process.env.CANVA_CLIENT_SECRET)})"

# 3. æ£€æŸ¥ API URL é…ç½®
grep '^BASE_CANVA_CONNECT_API_URL=' canva-connect-api-starter-kit/.env</pre></div>
          <p class="muted small"><strong>é¢„æœŸç»“æœï¼š</strong></p>
          <p class="muted small">- CLIENT_ID é•¿åº¦åº”ä¸º 15-20 å·¦å³ï¼Œå‰ç¼€ç±»ä¼¼ <span class="code">OC-AZbW7</span></p>
          <p class="muted small">- CLIENT_SECRET é•¿åº¦åº”ä¸º 60+ å­—ç¬¦</p>
          <p class="muted small">- API URL åº”ä¸º <span class="code">https://api.canva.cn/rest</span>ï¼ˆä¸å¸¦ /v1ï¼‰</p>
        </div>
        <div class="step">
          <div class="title">å¸¸è§é…ç½®é”™è¯¯ä¿®å¤</div>
          <p class="muted small"><strong>å¦‚æœ CLIENT_ID/SECRET é•¿åº¦ä¸º 0 æˆ–å¾ˆå°ï¼š</strong></p>
          <p class="small">è¯´æ˜å€¼ä¸ºç©ºæˆ–è¢«æˆªæ–­ï¼Œè¯·ä» Canva å¼€å‘è€…æ§åˆ¶å°é‡æ–°å®Œæ•´å¤åˆ¶ï¼Œä¸è¦æœ‰ç©ºæ ¼ã€å¼•å·ã€ä¸­æ–‡å­—ç¬¦ã€‚</p>
          <p class="muted small"><strong>å¦‚æœå€¼åŒ…å«éšè—å­—ç¬¦ï¼ˆå¦‚å›è½¦ã€BOMï¼‰ï¼š</strong></p>
          <div class="block small"><pre style="margin:0;white-space:pre-wrap;"># æ¸…ç†éšè—å­—ç¬¦
cd ~/CanvaAPI-Demo/canva-connect-api-starter-kit
LC_ALL=C tr -d '\r' < .env | sed '1s/^\xEF\xBB\xBF//' > /tmp/.env.clean && mv /tmp/.env.clean .env</pre></div>
        </div>
      </div>

      <h2>äº”ã€å¯åŠ¨ä¸ä½¿ç”¨</h2>
      <div class="steps">
        <div class="step">
          <div class="title">5) è‹¥æœªåœ¨è¿è¡Œï¼Œæ‰‹åŠ¨å¯åŠ¨</div>
          <div class="block"><code>cd canva-connect-api-starter-kit<br/>npm ci<br/>npm run demo:ecommerce</code></div>
          <p class="muted small">ç»ˆç«¯å‡ºç° "Ecommerce shop backend listening on port 3001" å³åç«¯å°±ç»ªã€‚</p>
          <p class="muted small">è‹¥æç¤ºç«¯å£å ç”¨ (EADDRINUSE)ï¼Œå…ˆæ¸…ç†æ—§è¿›ç¨‹ï¼š<span class="code">lsof -ti:3000 | xargs kill -9; lsof -ti:3001 | xargs kill -9</span></p>
        </div>
        <div class="step">
          <div class="title">6) æ‰“å¼€å‰ç«¯å¹¶æˆæƒ</div>
          <p>æµè§ˆå™¨è®¿é—® <span class="code">http://127.0.0.1:3000</span>ï¼Œåœ¨é¦–é¡µç‚¹å‡»"è¿æ¥ Canva"ï¼ŒæŒ‰æç¤ºå®Œæˆæˆæƒã€‚</p>
        </div>
      </div>

      <h2>å…­ã€æ›´æ–°é¡¹ç›®ï¼ˆæ‹‰å–æœ€æ–°ç‰ˆæœ¬ï¼‰</h2>
      <div class="steps">
        <div class="step">
          <div class="title">æ¨èï¼šä¸€é”®æ›´æ–°è„šæœ¬ â­</div>
          <p>æœ€ç®€å•çš„æ–¹å¼ï¼Œè‡ªåŠ¨å®Œæˆæ‰€æœ‰æ›´æ–°æ­¥éª¤ï¼š</p>
          <div class="block"><code>cd CanvaAPI-Demo<br/>./update.sh</code></div>
          <p class="muted small">è„šæœ¬ä¼šè‡ªåŠ¨ï¼šæ‹‰å–æœ€æ–°ä»£ç  â†’ æ›´æ–°ä¾èµ– â†’ åœæ­¢æ—§æœåŠ¡ â†’ å¯åŠ¨æ–°æœåŠ¡</p>
          <p class="muted small">æç¤ºï¼š<span class="code">.env</span> é…ç½®æ–‡ä»¶ä¸ä¼šè¢«è¦†ç›–ï¼Œä¿ç•™ä½ çš„æœ¬åœ°é…ç½®ã€‚</p>
        </div>
        <div class="step">
          <div class="title">æˆ–æ‰‹åŠ¨æ›´æ–°ï¼ˆåˆ†æ­¥æ‰§è¡Œï¼‰</div>
          <p>å¦‚æœéœ€è¦æ›´ç²¾ç»†çš„æ§åˆ¶ï¼Œå¯ä»¥åˆ†æ­¥æ‰§è¡Œï¼š</p>
          <div class="block small"><pre style="margin:0;white-space:pre-wrap;"># è¿›å…¥é¡¹ç›®ç›®å½•
cd CanvaAPI-Demo

# 1. æ‹‰å–æœ€æ–°ä»£ç 
git pull

# 2. æ›´æ–°ä¾èµ–ï¼ˆå¦‚æœ package.json æœ‰å˜åŒ–ï¼‰
cd canva-connect-api-starter-kit
npm ci

# 3. é‡å¯æœåŠ¡ï¼ˆå…ˆ Ctrl+C åœæ­¢å½“å‰æœåŠ¡ï¼Œç„¶åæ‰§è¡Œï¼‰
npm run demo:ecommerce</pre></div>
        </div>
        <div class="step">
          <div class="title">é‡åˆ°é—®é¢˜æ—¶ï¼šå®Œå…¨æ¸…ç†é‡è£…</div>
          <p>å¦‚æœæ›´æ–°åå‡ºç°å¼‚å¸¸ï¼Œå¯ä»¥æ¸…ç†å¹¶é‡æ–°å®‰è£…ï¼š</p>
          <div class="block small"><pre style="margin:0;white-space:pre-wrap;"># åœæ­¢æ‰€æœ‰æœåŠ¡
lsof -ti:3000 | xargs kill -9 2>/dev/null
lsof -ti:3001 | xargs kill -9 2>/dev/null

# æ¸…ç†å¹¶é‡æ–°å®‰è£…
cd canva-connect-api-starter-kit
rm -rf node_modules package-lock.json
npm install
npm run demo:ecommerce</pre></div>
        </div>
      </div>

      <p class="muted small" style="margin-top:24px;padding-top:16px;border-top:1px solid var(--border);">
        <strong>é‡åˆ°é—®é¢˜ï¼Ÿ</strong> å‚è€ƒ <span class="code">docs/Troubleshooting_Startup.md</span> è·å–å®Œæ•´ä¿®å¤æ­¥éª¤ã€è¯Šæ–­å‘½ä»¤ä¸å·²éªŒè¯çš„è§£å†³æ–¹æ¡ˆã€‚
      </p>
      <p class="muted small" style="margin-top:12px;">ç‰ˆæœ¬ï¼šv0.3.0-teammates-quickstart Â· å¦‚éœ€å¸®åŠ©è¯·è”ç³»é¡¹ç›®è´Ÿè´£äººã€‚</p>
    </main>
  </body>
  </html>


